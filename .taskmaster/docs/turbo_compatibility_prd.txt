# Turbo 호환성 개선 PRD

## 프로젝트 개요
Rails 8 애플리케이션의 Turbo 호환성을 개선하여 전체 페이지 새로고침 없이 더 빠른 사용자 경험을 제공하고자 합니다. 현재 여러 폼과 링크에서 local: true, turbo: false 설정으로 인해 Turbo가 비활성화되어 있어 이를 개선해야 합니다.

## 목표
- 모든 폼과 링크에서 Turbo를 활성화하여 SPA와 같은 빠른 사용자 경험 제공
- Rails 8의 Turbo 규약 준수 (status: :see_other 등)
- 전체 페이지 새로고침 최소화

## 작업 범위

### 1. 로그인 폼 Turbo 호환성 개선
- 파일: app/views/sessions/new.html.erb
- 현재 문제: local: true로 인한 Turbo 비활성화
- 개선 사항:
  - local: true 제거
  - 컨트롤러에서 적절한 status 코드 사용
  - 로그인 성공/실패 시 적절한 리다이렉션 처리
- 테스트: 로그인 성공/실패 시 페이지 새로고침 없이 처리되는지 확인

### 2. 어드민 경비 시트 목록 검색 폼 개선
- 파일: app/views/admin/expense_sheets/index.html.erb
- 현재 문제: local: true로 인한 검색 시 전체 페이지 새로고침
- 개선 사항:
  - local: true 제거
  - Turbo Frame을 활용한 검색 결과 부분 업데이트
  - 검색 파라미터 유지하면서 URL 업데이트
- 테스트: 검색 필터 적용 시 목록만 업데이트되는지 확인

### 3. 어드민 신청서 템플릿 폼 개선
- 파일: app/views/admin/request_templates/_form.html.erb
- 현재 문제: local: true로 인한 폼 제출 시 전체 페이지 새로고침
- 개선 사항:
  - local: true 제거
  - 컨트롤러에서 create/update 액션에 status: :see_other 추가
  - 저장 후 적절한 페이지로 리다이렉션
- 테스트: 템플릿 생성/수정 시 Turbo로 처리되는지 확인

### 4. 어드민 신청서 카테고리 폼 개선
- 파일: app/views/admin/request_categories/_form.html.erb
- 현재 문제: local: true로 인한 폼 제출 시 전체 페이지 새로고침
- 개선 사항:
  - local: true 제거
  - 컨트롤러에서 create/update 액션에 status: :see_other 추가
  - 저장 후 적절한 페이지로 리다이렉션
- 테스트: 카테고리 생성/수정 시 Turbo로 처리되는지 확인

### 5. 사용자 관리 폼 개선
- 파일: app/views/users/_form.html.erb
- 현재 문제: local: true로 인한 폼 제출 시 전체 페이지 새로고침
- 개선 사항:
  - local: true 제거
  - 컨트롤러에서 create/update 액션에 status: :see_other 추가
  - 저장 후 적절한 페이지로 리다이렉션
- 테스트: 사용자 정보 수정 시 Turbo로 처리되는지 확인

### 6. 조직 관리 폼 개선
- 파일: app/views/organizations/_form.html.erb
- 현재 문제: local: true로 인한 폼 제출 시 전체 페이지 새로고침
- 개선 사항:
  - local: true 제거
  - 컨트롤러에서 create/update 액션에 status: :see_other 추가
  - 저장 후 적절한 페이지로 리다이렉션
- 테스트: 조직 정보 수정 시 Turbo로 처리되는지 확인

## 기술 요구사항
- Rails 8.0.2 호환성 유지
- Turbo 8 규약 준수
- 기존 Stimulus 컨트롤러와의 호환성 유지
- 에러 처리 시에도 Turbo 동작 유지

## 성공 기준
- 모든 대상 폼에서 local: true 제거 완료
- 모든 컨트롤러 액션에서 적절한 status 코드 사용
- 전체 페이지 새로고침 없이 폼 제출 및 응답 처리
- 사용자 경험 개선 (페이지 로딩 시간 단축)

## 주의사항
- 파일 다운로드 링크는 turbo: false 유지 (정상 동작)
- 로그인 폼의 경우 세션 처리 특성 고려
- 검색 폼의 경우 URL 파라미터 유지 필요
- 각 수정 후 충분한 테스트 수행