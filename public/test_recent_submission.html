<!DOCTYPE html>
<html>
<head>
  <title>최근 제출 내역 테스트</title>
  <meta charset="utf-8">
</head>
<body>
  <h1>최근 제출 내역 API 테스트</h1>
  
  <div>
    <label>경비 시트 ID: <input type="text" id="sheetId" value="5"></label><br>
    <label>경비 코드 ID: <input type="text" id="codeId" value="1"></label><br>
    <button onclick="testAPI()">API 테스트</button>
  </div>
  
  <div id="result" style="margin-top: 20px; padding: 10px; border: 1px solid #ccc;">
    결과가 여기에 표시됩니다.
  </div>
  
  <script>
    async function testAPI() {
      const sheetId = document.getElementById('sheetId').value;
      const codeId = document.getElementById('codeId').value;
      const resultDiv = document.getElementById('result');
      
      resultDiv.innerHTML = '요청 중...';
      
      try {
        const url = `/expense_sheets/${sheetId}/expense_items/recent_submission?expense_code_id=${codeId}`;
        console.log('Requesting:', url);
        
        const response = await fetch(url);
        const data = await response.json();
        
        console.log('Response:', data);
        
        if (data.success) {
          resultDiv.innerHTML = `
            <h3>성공!</h3>
            <pre>${JSON.stringify(data.data, null, 2)}</pre>
          `;
        } else {
          resultDiv.innerHTML = `
            <h3>실패</h3>
            <p>${data.message}</p>
          `;
        }
      } catch (error) {
        resultDiv.innerHTML = `
          <h3>에러</h3>
          <p>${error.message}</p>
        `;
        console.error(error);
      }
    }
  </script>
</body>
</html>